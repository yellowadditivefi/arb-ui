(this["webpackJsonparb-token-bridge-ui"]=this["webpackJsonparb-token-bridge-ui"]||[]).push([[0],{100:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(355),r=a.n(n),c=a(664),l=a.n(c),o="8838d00c028a46449be87e666387c71a";var i="0xD485e5c28AA4985b23f6DF13dA03caa766dcd459",s={l1Address:"0x819702D5069736510fB53c48803128a8DC23E1Af",l2Address:"0xdE290B3BAB9d636C2a84d15C8EC13Ba0001a6641"},u={l1Address:"0x1d750369c91b129524B68f308512b0FE2C903d71",l2Address:"0x2EEBB8EE9c377caBC476654ca4aba016ECA1B9fc"},d={42:{chainID:"42",name:"Kovan",url:"https://kovan.infura.io/v3/"+o,gif:r.a,explorerUrl:"https://kovan.etherscan.io",partnerChainID:"144545313136048",isArbitrum:!1,tokenBridge:u,blockTime:5},144545313136048:{chainID:"144545313136048",name:"Arbitrum-testnet-5",gif:l.a,isArbitrum:!0,url:"https://kovan5.arbitrum.io/rpc",explorerUrl:"https://explorer5.arbitrum.io/#",confirmPeriodBlocks:900,partnerChainID:"42",tokenBridge:u},1:{chainID:"1",name:"Mainnet",url:"https://mainnet.infura.io/v3/"+o,gif:r.a,explorerUrl:"https://etherscan.io",isArbitrum:!1,partnerChainID:"42161",tokenBridge:s,blockTime:15},42161:{chainID:"42161",name:"Arb1",url:"https://arb1.arbitrum.io/rpc",gif:r.a,explorerUrl:"https://mainnet-arb-explorer.netlify.app",partnerChainID:"1",isArbitrum:!0,tokenBridge:s,confirmPeriodBlocks:45818}};t.b=d},1050:function(e,t){},1309:function(e,t,a){},1310:function(e,t,a){"use strict";a.r(t);var n=a(3),r=a.n(n),c=a(74),l=a.n(c),o=a(29),i=a(2),s=a.n(i),u=a(177),d=a(103),m=a(152);function b(e){return void 0!==e}function h(){return(h=Object(u.a)(s.a.mark((function e(t){var a,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=d.a.from(t.chainID).toHexString(),!b(window.ethereum)){e.next=11;break}return e.prev=2,e.next=5,null===(n=(r=window.ethereum).request)||void 0===n?void 0:n.call(r,{method:"wallet_addEthereumChain",params:[{chainId:a,chainName:t.name,nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:[t.url]}]});case 5:e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(2),console.warn("requestNetworkSwitch error",e.t0),e.abrupt("return",[]);case 11:return console.warn("No web3 injection detected"),e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e,null,[[2,7]])})))).apply(this,arguments)}function p(){return(p=Object(u.a)(s.a.mark((function e(){var t,a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!b(window.ethereum)){e.next=21;break}return e.prev=1,e.next=5,null===(a=(n=window.ethereum).request)||void 0===a?void 0:a.call(n,{method:"eth_requestAccounts"});case 5:if(e.t1=t=e.sent,e.t0=null!==e.t1,!e.t0){e.next=9;break}e.t0=void 0!==t;case 9:if(!e.t0){e.next=13;break}e.next=14;break;case 13:console.warn("No window.ethereum.enable function");case 14:e.next=20;break;case 16:return e.prev=16,e.t2=e.catch(1),console.warn("Failed to enable window.ethereum: "+e.t2.message),e.abrupt("return",[]);case 20:return e.abrupt("return",[new m.providers.Web3Provider(window.ethereum),window.ethereum.networkVersion]);case 21:return console.warn("No web3 injection detected"),e.abrupt("return",[]);case 23:case"end":return e.stop()}}),e,null,[[1,16]])})))).apply(this,arguments)}var E;!function(e){e[e.LOADING=0]="LOADING",e[e.NO_METAMASK=1]="NO_METAMASK",e[e.WRONG_NETWORK=2]="WRONG_NETWORK",e[e.DEPOSIT_MODE=3]="DEPOSIT_MODE",e[e.WITHDRAW_MODE=4]="WITHDRAW_MODE"}(E||(E={}));var f,v,g=a(433),w=a(67),x=a(330),y=a(665),O=a(155),k=a(55),C=function(e){var t=e.hash,a=e.type,c=e.layer,l=Object(k.b)().explorerUrl,o=Object(k.c)().explorerUrl,i=Object(n.useMemo)((function(){switch(a){case"deposit":case"deposit-l1":case"approve":case"connext-deposit":case"outbox":return"".concat(l,"/tx/").concat(t);case"deposit-l2":case"withdraw":case"connext-withdraw":case"deposit-l2-auto-redeem":return"".concat(o,"/tx/").concat(t);case"chain":return"".concat(o,"/chain/").concat(t);case"address":return 1===c?"".concat(l,"/address/").concat(t):"".concat(o,"/address/").concat(t)}}),[t,a,c]);return r.a.createElement("a",{href:i,target:"_blank"},t)},A=(null===(f=JSON.parse(window.localStorage.getItem("arbTransactions")||'""'))||void 0===f?void 0:f.length)>0,T=function(e){var t=e.transactions,a=e.walletAddress,c=e.clearPendingTransactions,l=e.arbProvider,i=e.ethProvider,s=(e.setTransactionConfirmed,e.updateTransactionStatus),u=Object(n.useCallback)((function(e){return(2===Object(w.e)(e.type)?l:i).getTransactionReceipt(e.txID)}),[l,i]),d=Object(k.b)().chainID,m=Object(n.useMemo)((function(){return t.filter((function(e){return e.sender===a})).filter((function(e){return!e.l1NetworkID||e.l1NetworkID===d})).reverse()}),[t,a]),b=Object(n.useMemo)((function(){return m.filter((function(e){return"pending"===e.status}))}),[m]),h=Object(n.useState)(!1),p=Object(o.a)(h,2),E=p[0],f=p[1];Object(n.useEffect)((function(){var e;if(!E)return A?m.length&&!b.length?f(!0):void(null===(e=v())||void 0===e||e.finally((function(){f(!0)}))):f(!0)}),[E,b,m]);var v=Object(n.useCallback)((function(){if(b.length)return console.info("Checking and updating cached pending transactions' statuses"),Promise.all(b.map((function(e){return u(e)}))).then((function(e){e.forEach((function(e,t){e?s(e):console.warn("Transaction receipt not found:",b[t].txID)}))}))}),[b,u]);Object(n.useEffect)((function(){window.setInterval(v,5e3)}),[v]);var g=function(e){switch(e){case"failure":return{backgroundColor:"pink"};case"success":case"confirmed":return{backgroundColor:"lightgoldenrodyellow"};default:return{opacity:.5}}};return r.a.createElement(x.a,{id:"txn-table",striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"TxID"),r.a.createElement("th",null,"Type"),r.a.createElement("th",null,"status"),r.a.createElement("th",null,"asset"),r.a.createElement("th",null,"value"))),r.a.createElement("tbody",null,m.length>0?m.map((function(e){return r.a.createElement("tr",{style:g(e.status),key:e.txID},r.a.createElement("td",null,r.a.createElement(C,{hash:e.txID,type:e.type})),r.a.createElement("td",null,e.type),r.a.createElement("td",null," ","pending"===e.status?r.a.createElement(y.a,{animation:"border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")):e.status," "),r.a.createElement("td",null,e.assetName),r.a.createElement("td",null,function(e){var t=e.value,a=e.assetType;return"string"!==typeof e.value?"n/a":a===w.a.ERC721?"'".concat(t,"'"):t}(e)))})):r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("i",null,"no transactions to display"))),b.length?r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(O.a,{onClick:c},"clear pending txns"))):null))},S=r.a.createContext(E.DEPOSIT_MODE),D=function(){return Object(n.useContext)(S)===E.DEPOSIT_MODE},I=S,j=function(e){var t=e.ethAddress,a=(e.ethBalance,e.erc20Balance,e.erc721Balance,e.bridgeTokens),c=e.currentERC20Address,l=e.currentERC721Address,o=a[c],i=(o&&o.symbol,a[l]),s=(i&&i.symbol,D()),u=Object(k.d)(),d=u.name,m=u.isArbitrum,b=Object(k.c)(),p=Object(n.useMemo)((function(){return"Connected to ".concat(d)}),[d]);return r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("div",{className:"top-thing"}," ",r.a.createElement("a",{href:"https://arbitrum.io/",target:"_blank"},"ARBITRUM")," "),r.a.createElement("h1",{className:"text-center"},"Arbitrum Token Bridge"),r.a.createElement("h5",{className:"text-center"},p),m?r.a.createElement("h5",{className:"text-center"},r.a.createElement("a",{onClick:function(e){e.preventDefault(),window.open(window.location.origin+"#info")},href:"",style:{fontSize:12,fontFamily:"Montserrat Light"}},"(Connect to ",s?"L2":"L1",")")," "):r.a.createElement("h5",{onClick:function(){return function(e){return h.apply(this,arguments)}(b)},className:"text-center switch-notice"},"Add/Switch to Arbitrum Network"),r.a.createElement("div",{className:"address-container"},r.a.createElement("p",{className:"address"},"Your address:"," ",r.a.createElement("span",{id:"accountAddress"},r.a.createElement(C,{hash:t,type:"address"}))),r.a.createElement("p",{className:"arbchain"})),r.a.createElement("hr",null))},N=a(700),M=a(437),R=a(160),B=a(111),W=a(80),L=a(701),P=a(358),_=function(e,t,a){var n=function(e){e.preventDefault(),window.open(window.location.origin+"#info")};return r.a.createElement(P.a,{id:"popover-basic"},r.a.createElement(P.a.Title,{as:"h3"},"Actions disabled"),r.a.createElement(P.a.Content,null,t?"Withdrawals not supported on old testnet; connect to new Arbitrum testnet.":e?r.a.createElement("div",null,"To enable these actions, connect to L1 (",a,")",r.a.createElement("a",{onClick:n,href:""}," ","Learn how.")," "):r.a.createElement("div",{style:{fontSize:12}},r.a.createElement("div",null,"To enable these actions, connect to an Arbitrum node via custom RPC."," ",r.a.createElement("a",{onClick:n,href:""}," ","Learn how.")))))},F=function(e){var t=e.isDepositPanel,a=e.disabledWithdrawals,n=void 0!==a&&a,c=e.children,l=D(),o=Object(k.b)().name;if(!n&&l===t)return r.a.createElement("div",null," ",c);var i=function(e){"challenge-blog-link"!==e.target.id&&(e.preventDefault(),e.stopPropagation())};return r.a.createElement("div",null,r.a.createElement(L.a,{placement:"bottom-start",delay:{show:100,hide:1e3},overlay:_(t,n,o),trigger:["hover","focus"]},r.a.createElement("div",{style:{opacity:.4},onClick:i,onMouseEnter:i}," ",c)))},H=a(667),U=function(e){var t=Object(n.useState)(e),a=Object(o.a)(t,2),r=a[0],c=a[1];return[r,function(e,t){c(e>t?t:e)}]},z=a(221),G=a(156),K=a(1500),V=a(223),Y=function(e){var t=e.max,a=e.text,c=e.onSubmit,l=e.disabled,i=void 0!==l&&l,s=e.buttonText,u=e.readOnlyValue,d=e.buttonHoverText,m=void 0===d?"":d,b=U(u||0),h=Object(o.a)(b,2),p=h[0],E=h[1],f=Object(n.useCallback)((function(e){e.preventDefault(),c(p.toString()),E(0,t)}),[p,c]);return r.a.createElement(z.a,{size:"sm",className:"mb-1",onChange:function(e){E(e.target.value,t)}},r.a.createElement(V.a,{onSubmit:f},r.a.createElement(G.a,{"aria-label":"Small","aria-describedby":"inputGroup-sizing-sm",value:p||"",type:"number",step:"0.01",disabled:i,placeholder:a,readOnly:"number"===typeof u})),r.a.createElement(K.a,{title:m},r.a.createElement("span",null,r.a.createElement(O.a,{disabled:i,type:"submit",onClick:f},s||"submit"))))},q=a(162),J=m.utils.formatUnits,Q=function(e){var t=e.pendingWithdrawalsMap,a=e.filter,c=e.headerText,l=e.triggerOutbox,i=e.ethProvider,d=e.decimals,m=void 0===d?18:d,b=Object(n.useState)(0),h=Object(o.a)(b,2),p=h[0],E=h[1],f=Object(k.c)().confirmPeriodBlocks,v=void 0===f?45818:f,g=Object(k.b)().blockTime,w=void 0===g?15:g;Object(n.useEffect)((function(){i.on("block",(function(e){console.info("l1 blockNumber:",e),E(e)}))}),[]);var y=Object(n.useCallback)(function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(t);case 2:e.sent||alert("Can't claim this withdrawal yet; try again later");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[l]),O=Object(n.useMemo)((function(){return Object.keys(t).sort().map((function(e){return t[e]})).filter(a)}),[t]),C=function(e){var t=e.outgoingMessageState,a=e.ethBlockNum,n=(e.indexInBatch,e.batchNumber,Math.max(v-(p-a.toNumber()),0));switch(t){case q.OutgoingMessageState.NOT_FOUND:case q.OutgoingMessageState.UNCONFIRMED:var c=function(e){var t=Math.round(e*w/60),a=Math.round(t/60),n=Math.round(a/24);return n>0?"~".concat(e," blocks (~").concat(n," day").concat(1===n?"":"s",")"):a>0?"~".concat(e," blocks (~").concat(a," hour").concat(1===a?"":"s",")"):0===t?"any minute!":"~".concat(e," blocks (~").concat(t," minute").concat(1===t?"":"s",")")}(n);return r.a.createElement("span",null,"Unconfirmed: ETA: ",c," ");case q.OutgoingMessageState.CONFIRMED:return r.a.createElement("span",null,"Confirmed!"," ",r.a.createElement("button",{onClick:function(){return y(e.uniqueId.toString())}},"claim"));case q.OutgoingMessageState.EXECUTED:return r.a.createElement("span",null,r.a.createElement("i",null,"Already claimed "))}};return r.a.createElement("div",null,r.a.createElement(x.a,{className:"pw-table",striped:!0,bordered:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,c),r.a.createElement("tr",null,r.a.createElement("th",null,"value"),r.a.createElement("th",null,"status"),r.a.createElement("th",null))),r.a.createElement("tbody",null,O.map((function(e){var t=e.uniqueId.toString();return r.a.createElement("tr",{key:t},r.a.createElement("td",null,J(e.value.toString(),m)),r.a.createElement("td",null,C(e)),r.a.createElement("td",null))})))))},X=m.utils.formatEther,$=function(e){var t=e.balances,a=e.eth,c=e.transactions,l=e.pendingWithdrawalsMap,o=e.ethProvider,i=t?+X(t.balance):0,s=Object(k.b)(),u=(Object(n.useMemo)((function(){return c.reduce((function(e,t){var a=t.type,n=t.assetName,r=t.status,c=t.value;return"withdraw"===a&&"success"===r&&"ETH"===n?e+ +(c||0):e}),0)}),[c]),Object(n.useCallback)((function(e){a.deposit(e,"42"===s.chainID)}),[s]));return r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"basic-url"},"ETH on L1: ",i),r.a.createElement(Y,{max:i,text:"Deposit Eth",onSubmit:u,disabled:0===i,buttonText:"deposit"}),r.a.createElement("label",{htmlFor:"basic-url"}),r.a.createElement(Q,{filter:function(e){return e.type===w.a.ETH},headerText:"Pending ETH Withdrawals",triggerOutbox:a.triggerOutbox,pendingWithdrawalsMap:l,ethProvider:o}))},Z=function(){var e=Object(k.b)().name,t=Object(k.c)().confirmPeriodBlocks;return r.a.createElement("div",{style:{fontStyle:"italic",fontFamily:"Montserrat Light",fontSize:12,marginTop:10,marginBottom:10}}," ",'Note: for standard, bridge withdrawals, the withdrawal will be in a "pending" state during a "challenge period" roughly (~',t," blocks on ",e,"). After that, the funds will be available on layer 1 in your lockbox."," ",r.a.createElement("a",{href:"https://medium.com/offchainlabs/optimizing-challenge-periods-in-rollup-b61378c87277",target:"_blank",id:"challenge-blog-link"},"Learn more"),".")},ee=a(102),te=a(1499),ae=a(698),ne=a(435),re=a.n(ne),ce=a(695),le=a.n(ce),oe=a(436),ie=a.n(oe),se=Object(te.a)((function(e){return{tooltip:{fontSize:"14px"}}})),ue=new Set(["0x0000000000000000000000000000000000000000"]),de=function(e){var t=e.max,a=e.text,c=e.onSubmit,l=e.disabled,i=void 0!==l&&l,s=(e.buttonText,e.readOnlyValue),u=e.assetId,d=void 0===u?"0x0000000000000000000000000000000000000000":u,m=e.ethAddress,b=e.handleConnextTxn,h=e.tokenSymbol,p=void 0===h?"":h,E=e.id,f=U(s||0),v=Object(o.a)(f,2),g=v[0],x=v[1],y=Object(n.useState)(!1),O=Object(o.a)(y,2),C=O[0],A=O[1],T=Object(n.useCallback)((function(e){e&&e.preventDefault(),g?(c(g.toString()),x(0,t)):alert("Input non-zero value to withdraw")}),[g,c]),S=Object(k.b)(),D=Object(k.c)(),I=Object(n.useMemo)((function(){return!0}),[i]),j=Object(n.useCallback)((function(e){e&&e.preventDefault(),I||(g?ue.has(d)?A(!0):alert("Connext ERC20 support coming soon!"):alert("Input non-zero value to withdraw"))}),[g,d,I]),N=g.toString(),M=se(),R="0x0000000000000000000000000000000000000000"===d;return r.a.createElement(z.a,{size:"sm",className:"mb-1",onChange:function(e){x(e.target.value,t)}},r.a.createElement(ae.a,{showModal:C,onClose:function(){return A(!1)},depositChainId:+D.chainID,withdrawChainId:+S.chainID,routerPublicIdentifier:"vector7tbbTxQp8ppEQUgPsbGiTrVdapLdU5dH7zTbVuXRf1M4CEBU9Q",depositAssetId:d,withdrawAssetId:d,withdrawChainProvider:S.url,depositChainProvider:D.url,withdrawalAddress:m,injectedProvider:window.ethereum,transferAmount:N,onDepositTxCreated:function(e){b({value:g.toString(),txID:e,assetName:R?"ETH":p,assetType:R?w.a.ETH:w.a.ERC20,sender:m,type:"connext-deposit"})},onWithdrawalTxCreated:function(e){b({value:g.toString(),txID:e,assetName:R?"ETH":p,assetType:R?w.a.ETH:w.a.ERC20,sender:m,type:"connext-withdraw"})}}),r.a.createElement(V.a,null,r.a.createElement(G.a,{"aria-label":"Small","aria-describedby":"inputGroup-sizing-sm",value:g||"",type:"number",step:"0.00001",disabled:i,placeholder:a,readOnly:"number"===typeof s})),r.a.createElement(ee.a,null,r.a.createElement(ee.a.Toggle,{id:"dropdown-basic_"+E,className:"withdraw-menu"},"Withdraw ",r.a.createElement("img",{className:"withdraw-dropdown-icon",src:re.a}),"/",r.a.createElement("img",{className:"withdraw-dropdown-icon",src:ie.a})),r.a.createElement(ee.a.Menu,null,r.a.createElement(K.a,{classes:M,title:"Standard withdrawal via the Arbitrum L1/L2 bridge contract.",placement:"right-end"},r.a.createElement(ee.a.Item,{onSelect:T,disabled:i},r.a.createElement("img",{className:"withdraw-dropdown-icon",src:le.a}),"Bridge (Slow)")),r.a.createElement(K.a,{classes:M,title:"Connext-powered fast-widthdrawal via cross-chain atomic swaps!",placement:"right-end"},r.a.createElement(ee.a.Item,{onSelect:j,disabled:I}," ",r.a.createElement("img",{className:"withdraw-dropdown-icon",src:re.a})," ","Connext (Fast)")),r.a.createElement(K.a,{classes:M,title:"Hop-powered fast-withdrawal via cross-chain AMM exhanges! (Currently DAI-only)",placement:"right-end"},r.a.createElement(ee.a.Item,{href:"https://hop.exchange/",target:"_blank"},r.a.createElement("img",{className:"withdraw-dropdown-icon",src:ie.a})," Hop (Fast, DAI Only)")))))},me=m.utils.formatEther,be=function(e){var t=e.balances,a=e.eth,n=e.ethAddress,c=e.handleConnextTxn,l=t?+me(t.arbChainBalance):0,o=D();return r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"basic-url"},"ETH on L2: ",l),r.a.createElement(de,{max:l,text:"Withdraw Eth",onSubmit:a.withdraw,disabled:0===l||o,buttonText:"withdraw",ethAddress:n,handleConnextTxn:c,id:1}),r.a.createElement(Z,null))},he=m.utils.formatUnits,pe=function(e){var t=e.balances,a=e.token,c=e.bridgeTokens,l=e.currentERC20Address,o=e.transactions,i=e.pendingWithdrawalsMap,s=e.ethProvider,u=c[l],d=u&&u.decimals||18,m=t?+he(t.balance,d):0,b=(t&&he(t.arbChainBalance,d),D());Object(n.useMemo)((function(){return u?o.reduce((function(e,t){var a=t.type,n=t.assetName,r=t.status,c=t.value;return"withdraw"===a&&"success"===r&&n===u.symbol?e+ +(c||0):e}),0):0}),[o,u]);return r.a.createElement("div",null,u&&!u.allowed&&r.a.createElement(O.a,{variant:"outline-secondary",disabled:!1,onClick:function(){return a.approve(l)}},"Approve"),r.a.createElement("label",{htmlFor:"basic-url"},"Token on L1: ",m),r.a.createElement(Y,{max:m,text:"Deposit Token",onSubmit:function(e){a.deposit(l,e)},disabled:!b||0===m,buttonText:"deposit"}),r.a.createElement("label",{htmlFor:"basic-url"}),r.a.createElement(Q,{filter:function(e){return e.type===w.a.ERC20},headerText:"Pending Token Withdrawals",triggerOutbox:a.triggerOutbox,pendingWithdrawalsMap:i,ethProvider:s,decimals:d}))},Ee=m.utils.formatUnits,fe=function(e){var t=e.balances,a=e.eth,n=e.bridgeTokens,c=e.currentERC20Address,l=e.ethAddress,o=e.handleConnextTxn,i=n[c],s=i&&i.decimals||18,u=t?+Ee(t.arbChainBalance,s):0,d=D(),m=i&&i.symbol;return r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"basic-url"},"Token on L2: ",u),r.a.createElement(r.a.Fragment,null," ",r.a.createElement(de,{max:u,text:"Withdraw Token",onSubmit:function(e){a.withdraw(c,e)},disabled:0===u||d||!1,buttonText:"withdraw",ethAddress:l,assetId:c||void 0,handleConnextTxn:o,tokenSymbol:m,id:2}),r.a.createElement(Z,null)))},ve=a(145),ge=function(e){var t=e.ethBalances,a=e.erc20BridgeBalance,n=e.addToken,c=e.eth,l=e.token,i=(e.erc721balance,e.currentERC20Address),s=e.bridgeTokens,u=e.currentERC721Address,d=e.setCurrentERC20Address,m=(e.setCurrentERC721Address,e.transactions),b=e.ethAddress,h=e.handleConnextTxn,p=e.pendingWithdrawalsMap,E=e.ethProvider,f=Object(ve.useLocalStorage)("currentTab","eth"),v=Object(o.a)(f,2),g=v[0],x=v[1],y=r.a.useState(!1),O=Object(o.a)(y,2),A=(O[0],O[1],Object.values(s).filter((function(e){return!!e})).sort((function(e,t){return e.symbol===t.symbol?e.address>t.address?1:-1:e.symbol>t.symbol?1:-1}))),T=A.filter((function(e){return e.type===w.c.ERC20})),S=(A.filter((function(e){return e.type===w.c.ERC721})),s[i]),D=(s[u],S&&S.l2Address||null),I=Object(k.b)().chainID;return r.a.createElement(N.a,{id:"controlled-tab-example",activeKey:g,onSelect:function(e){return x(e||g)}},r.a.createElement(M.a,{eventKey:"eth",title:"ETH"},r.a.createElement(R.a,null,r.a.createElement(B.a,null,r.a.createElement(W.a,null,r.a.createElement(F,{isDepositPanel:!0},r.a.createElement($,{balances:t,eth:c,transactions:m,pendingWithdrawalsMap:p,ethProvider:E}))),r.a.createElement(W.a,null,r.a.createElement(F,{isDepositPanel:!1,disabledWithdrawals:!1},r.a.createElement(be,{balances:t,eth:c,ethAddress:b,handleConnextTxn:h})))))),"1"!==I?r.a.createElement(M.a,{eventKey:"erc20",title:"ERC-20"},r.a.createElement(R.a,null,r.a.createElement(B.a,{md:6},r.a.createElement(W.a,null,r.a.createElement(H.a,{bridgeTokensArray:T,addToken:n,tokenType:w.c.ERC20,currentToken:S,setCurrentAddress:d}))),r.a.createElement(B.a,{style:{fontSize:14}},i?r.a.createElement(W.a,null,"Token L1 Address:"," ",r.a.createElement(C,{hash:i,type:"address",layer:1})):null),r.a.createElement(B.a,{style:{fontSize:14}},D?r.a.createElement(W.a,null,"Token L2 Address:"," ",r.a.createElement(C,{hash:D,type:"address",layer:2})):null),r.a.createElement(B.a,null,r.a.createElement(W.a,null,r.a.createElement(F,{isDepositPanel:!0},r.a.createElement(pe,{balances:a,token:l,bridgeTokens:s,currentERC20Address:i,transactions:m,pendingWithdrawalsMap:p,ethProvider:E}))),r.a.createElement(W.a,null,r.a.createElement(F,{isDepositPanel:!1,disabledWithdrawals:!1},r.a.createElement(fe,{balances:a,eth:l,bridgeTokens:s,currentERC20Address:i,ethAddress:b,handleConnextTxn:h})))))):null)},we=(a(1308),a(1309),a(183)),xe=a(100);!function(e){e[e.VERIFYING=0]="VERIFYING",e[e.ALLOWED=1]="ALLOWED",e[e.DISALLOWED=2]="DISALLOWED"}(v||(v={}));var ye=function(e){var t=e.bridge,a=Object(n.useState)(v.VERIFYING),c=Object(o.a)(a,2),l=c[0],i=c[1],d=t.l2Signer.provider,m=t.l1Bridge.l1Signer.provider,b=Object(k.b)().chainID,h=Object(w.f)(t),p=h.walletAddress,E=h.balances,f=(h.cache,h.token),x=h.bridgeTokens,y=h.eth,O=h.transactions,C=h.pendingWithdrawalsMap;Object(n.useEffect)((function(){p&&("1"!==b?i(v.ALLOWED):t.isWhiteListed(p,xe.a).then((function(e){i(e?v.ALLOWED:v.DISALLOWED)})))}),[b,p]);var A=Object(ve.useLocalStorage)("currentERC20",""),S=Object(o.a)(A,2),D=S[0],I=S[1],N=Object(ve.useLocalStorage)("currentERC721",""),M=Object(o.a)(N,2),R=M[0],B=M[1];Object(n.useEffect)((function(){var e=Object.keys(x).sort();D||I(e[0]||"")}),[x]);var W=function(){var e=E.erc20;if(D&&e&&e[D])return e[D]}(),L=function(){var e=E.erc721;if(R&&e&&e)return e[R]}(),P=O.addTransaction,_=O.updateTransactionStatus,F=Object(n.useCallback)(function(){var e=Object(u.a)(s.a.mark((function e(t){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(Object(g.a)(Object(g.a)({},t),{},{status:"pending"})),a="connext-deposit"===t.type?d:m,e.next=4,a.waitForTransaction(t.txID);case 4:n=e.sent,_(n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[d,P,_,m]);return Object(n.useEffect)((function(){window.setInterval((function(){E.update()}),5e3)}),[]),l===v.VERIFYING?je("verifying...","primary"):l===v.DISALLOWED?je("Stop! You are attempting to use Mainnet Beta with unapproved address ".concat(p,"!"),"danger"):r.a.createElement("div",{className:"container"},"1"===b?r.a.createElement(we.a,{variant:"danger"},r.a.createElement("b",null,"NOTICE: You're connected to mainnet, still in beta phase. BE CAREFUL!")):null,r.a.createElement("div",{className:"row"},r.a.createElement(j,{ethAddress:p,ethBalance:E.eth,erc20Balance:W,erc721Balance:L,bridgeTokens:x,currentERC20Address:null!==D&&void 0!==D?D:"",currentERC721Address:null!==R&&void 0!==R?R:""})),r.a.createElement("div",{className:"row",id:"bridgeRow"},r.a.createElement("div",{id:"bridgebody"},r.a.createElement(ge,{ethBalances:E.eth,erc20BridgeBalance:W,addToken:f.add,eth:y,token:f,erc721balance:L,bridgeTokens:x,currentERC20Address:null!==D&&void 0!==D?D:"",currentERC721Address:null!==R&&void 0!==R?R:"",setCurrentERC20Address:I,setCurrentERC721Address:B,transactions:O.transactions,ethAddress:p,handleConnextTxn:F,pendingWithdrawalsMap:C,ethProvider:m}))),r.a.createElement("div",{className:"row"},r.a.createElement(T,{ethProvider:t.l1Bridge.l1Provider,arbProvider:t.l2Provider,transactions:O.transactions,clearPendingTransactions:O.clearPendingTransactions,walletAddress:p,setTransactionConfirmed:O.setTransactionConfirmed,updateTransactionStatus:O.updateTransactionStatus})))},Oe=a(696),ke=a.n(Oe),Ce=function(e){var t=e.url,a=e.msg;return r.a.createElement("a",{href:"",onClick:function(e){e.preventDefault(),Se(t),alert(a)}},t)},Ae=function(){Object(k.d)();var e=xe.b[42],t=xe.b[e.partnerChainID],a=e.name,n=t.name;return r.a.createElement(R.a,null,r.a.createElement(we.a,{variant:"primary"}," ","Connect to ".concat(a," for L1 actions or ").concat(n," for L2 actions")),r.a.createElement(B.a,{className:"text-center"},r.a.createElement(W.a,null," ",r.a.createElement("div",{style:Te.upperSecton},r.a.createElement("div",{style:Te.headerStyle}," ","Connect to ",a," (deposit into Arbitrum)"),r.a.createElement("div",{style:Te.textStyle}," ","Connect to Kovan test work to deposit ETH/tokens into Arbitrum")),r.a.createElement("div",null,r.a.createElement("img",{style:Te.gifStyle,src:e.gif}))),r.a.createElement(W.a,null,r.a.createElement("div",{style:Te.upperSecton},r.a.createElement("div",{style:Te.headerStyle}," ","Connect to ",n," (withdraw from Arbitrum)"),r.a.createElement("div",{style:Te.textStyle}," ","Connect to",r.a.createElement("a",{href:"https://developer.offchainlabs.com/docs/Developer_Quickstart/",target:"_blank"}," ","your own node")," ","or to our publically hosted nodes via custom RPC:",r.a.createElement("br",null)," ",r.a.createElement(Ce,{url:t.url,msg:"Arbv5 node rpc url copied to clipboard"})," ","with chain ID"," ",r.a.createElement(Ce,{url:t.chainID.toString(),msg:"Arbv5 chain ID copied to clipboard"})," ","for Arbv5")),r.a.createElement("img",{className:"text-center",style:Te.gifStyle,src:t.gif})),r.a.createElement(W.a,null,r.a.createElement("div",{style:Te.upperSecton},r.a.createElement("div",{style:Te.headerStyle}," ",r.a.createElement("b",null,"Optional"),": add Arbitrum block explorer URL"),r.a.createElement("div",{style:Te.textStyle},"Add our custom block explorer url to Arbitrum network:"," ",r.a.createElement(Ce,{url:"https://explorer5.arbitrum.io/#",msg:"Block explorer url copied to clipboard"}),"('Settings' > 'Networks' > 'Arbitrum' > 'Block Explorer URL (optional)')")),r.a.createElement("img",{className:"text-center",style:Te.gifStyle,src:ke.a}))))},Te={gifStyle:{maxWidth:160,border:"1px solid black"},textStyle:{fontSize:"10px"},headerStyle:{fontSize:"12px",fontWeight:500,minHeight:30,marginBottom:10,marginTop:10},upperSecton:{minHeight:120,justifyContent:"center"}},Se=function(e){var t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)},De=a(697),Ie=a.n(De),je=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"danger";return r.a.createElement(R.a,null,r.a.createElement(we.a,{variant:t},e))},Ne=function(){var e=Object(n.useState)(),t=Object(o.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(E.LOADING),i=Object(o.a)(l,2),s=i[0],u=i[1],d=Object(n.useState)(""),h=Object(o.a)(d,2),f=h[0],v=h[1],g=Object(n.useCallback)((function(){if(s===E.LOADING)try{(function(){return p.apply(this,arguments)})().then((function(e){var t=Object(o.a)(e,2),a=t[0],n=t[1];if(!a)return u(E.NO_METAMASK);if(!n)return u(E.NO_METAMASK);if(v(n),function(){var e=!1;b(window.ethereum)&&(console.warn("setting listeners"),!e&&window.ethereum.on("networkChanged",(function(t){e=!0,window.location.reload()})),!e&&window.ethereum.on("accountsChanged",(function(t){e=!0,window.location.reload()})))}(),"#info"===window.location.hash)return u(E.WRONG_NETWORK);var r=xe.b[n];if(!r)return console.warn("WARNING: unsupported network"),u(E.WRONG_NETWORK);var l=xe.b[r.partnerChainID];if(r.isArbitrum){var i;console.info("withdrawal mode detected");var s=a,d=new m.providers.JsonRpcProvider(l.url).getSigner(null===(i=window.ethereum)||void 0===i?void 0:i.selectedAddress),h=s.getSigner(0),p=new q.Bridge(r.tokenBridge.l1Address,r.tokenBridge.l2Address,d,h);c(p),u(E.WITHDRAW_MODE)}else{var f;console.info("deposit mode detected");var g=a,w=new m.providers.JsonRpcProvider(l.url),x=g.getSigner(0),y=w.getSigner(null===(f=window.ethereum)||void 0===f?void 0:f.selectedAddress),O=new q.Bridge(r.tokenBridge.l1Address,r.tokenBridge.l2Address,x,y);c(O),u(E.DEPOSIT_MODE)}}))}catch(e){u(E.NO_METAMASK)}}),[s,window.ethereum]);Object(n.useEffect)((function(){g()}),[]);return r.a.createElement("div",null,function(e,t){switch(e){case E.LOADING:return r.a.createElement("div",null,je("loading...","primary"));case E.NO_METAMASK:return r.a.createElement("div",null,r.a.createElement(R.a,null,r.a.createElement(we.a,{className:"text-center",variant:"danger"},"Ethereum provider not detected; make sure you have MetaMask connected."),r.a.createElement(B.a,{className:"text-center"},r.a.createElement(W.a,null,r.a.createElement("a",{href:"https://metamask.io/download.html",target:"_blank"},r.a.createElement("img",{width:"150",src:Ie.a})," "))),r.a.createElement(B.a,{className:"text-center"},r.a.createElement(W.a,null,r.a.createElement("h4",null," ",r.a.createElement("a",{href:"https://metamask.io/download.html",target:"_blank"},"Install MetaMask"," "))))));case E.WRONG_NETWORK:return r.a.createElement(k.a.Provider,{value:f},r.a.createElement("div",null,r.a.createElement(Ae,null)));default:if(!t)throw new Error("initialization error");return r.a.createElement(k.a.Provider,{value:f},r.a.createElement(I.Provider,{value:e},r.a.createElement(ye,{bridge:t})))}}(s,a))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(Ne,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},355:function(e,t,a){e.exports=a.p+"static/media/l1.4109e112.gif"},435:function(e,t,a){e.exports=a.p+"static/media/connext.218d35f6.png"},436:function(e,t,a){e.exports=a.p+"static/media/hop.f7bfc01a.png"},55:function(e,t,a){"use strict";a.d(t,"d",(function(){return o})),a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return s}));var n=a(3),r=a.n(n),c=a(100),l=r.a.createContext(""),o=function(){var e=Object(n.useContext)(l);return c.b[e]},i=function(){var e=o();return e.isArbitrum?c.b[e.partnerChainID]:e},s=function(){var e=o();return e.isArbitrum?e:c.b[e.partnerChainID]};t.a=l},664:function(e,t,a){e.exports=a.p+"static/media/l2.98c2176c.gif"},667:function(e,t,a){"use strict";(function(e){var n=a(29),r=a(102),c=a(668),l=a(221),o=a(156),i=a(143),s=a(223),u=a(67),d=a(3),m=a.n(d),b=a(55),h=function(e){return e.startsWith("0x")&&42===e.length};t.a=function(t){var a=t.bridgeTokensArray,p=t.addToken,E=t.tokenType,f=t.currentToken,v=t.setCurrentAddress,g=Object(d.useState)(""),w=Object(n.a)(g,2),x=w[0],y=w[1],O=Object(b.b)().chainID,k=Object(d.useMemo)((function(){return f?f.symbol:a.length>0?"Add / Select Token":"Add Token"}),[a,f]);return m.a.createElement(c.a,{as:l.a.Prepend,variant:"outline-secondary",title:k,id:"input-group-dropdown-1"},a.map((function(e,t){return m.a.createElement(r.a.Item,{key:t,onClick:function(){v(e.address)}},e.symbol)})),m.a.createElement(r.a.Divider,null),m.a.createElement(s.a,{onSubmit:function(t){switch(t.preventDefault(),Object(u.d)(x,O)){case u.b.WHITELISTED:return p(x,E),y("");case u.b.BLACKLISTED:return alert("Token you're trying to add has features incompatible with the Arbitrum bridge");case u.b.NEUTRAL:if(!e.confirm("We don't recognize this token; are you sure you want to add it?"))return;return p(x,E),y("")}}},m.a.createElement(o.a,{isInvalid:!!x&&!h(x),isValid:!!x&&h(x),placeholder:"paste token address",onChange:function(e){return y(e.target.value)},value:x}),m.a.createElement(i.a,{type:"valid"},"press enter to add token"),m.a.createElement(i.a,{type:"invalid"},"invalid address")))}}).call(this,a(41))},695:function(e,t,a){e.exports=a.p+"static/media/arb.cd4168e7.png"},696:function(e,t,a){e.exports=a.p+"static/media/explorer.de7a3c42.gif"},697:function(e,t,a){e.exports=a.p+"static/media/metamask-fox.4d6b1fcc.svg"},757:function(e,t,a){e.exports=a(1310)},763:function(e,t){},872:function(e,t){},879:function(e,t){},881:function(e,t){},890:function(e,t){},892:function(e,t){},917:function(e,t){},922:function(e,t){},924:function(e,t){},931:function(e,t){},943:function(e,t){}},[[757,1,2]]]);
//# sourceMappingURL=main.e74c5721.chunk.js.map